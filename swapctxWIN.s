SECTION .text
GLOBAL AIWNIOS_getcontext
GLOBAL AIWNIOS_setcontext
GLOBAL AIWNIOS_makecontext
AIWNIOS_getcontext:
	POP RDX
	MOV QWORD [RCX+0*8],RDX
	MOV QWORD [RCX+1*8],RSP
	MOV QWORD [RCX+2*8],RBP
	MOV QWORD [RCX+3*8],RBX
	MOV QWORD [RCX+4*8],R12
	MOV QWORD [RCX+5*8],R13
	MOV QWORD [RCX+6*8],R14
	MOV QWORD [RCX+7*8],R15
	MOV QWORD [RCX+8*8],RDI
	MOV QWORD [RCX+9*8],RSI
	MOVSD QWORD [RCX+10*8],XMM6
	MOVSD QWORD [RCX+11*8],XMM7
	MOVSD QWORD [RCX+12*8],XMM8
	MOVSD QWORD [RCX+13*8],XMM9
	MOVSD QWORD [RCX+14*8],XMM10
	MOVSD QWORD [RCX+15*8],XMM11
	MOVSD QWORD [RCX+17*8],XMM12
	MOVSD QWORD [RCX+18*8],XMM13
	MOVSD QWORD [RCX+19*8],XMM14
	MOVSD QWORD [RCX+20*8],XMM15
	MOV RAX,0
	JMP RDX
AIWNIOS_setcontext:
	MOV RDX,QWORD [RCX+0*8]
	MOV RSP,QWORD [RCX+1*8]
	MOV RBP,QWORD [RCX+2*8]
	MOV RBX,QWORD [RCX+3*8]
	MOV R12,QWORD [RCX+4*8]
	MOV R13,QWORD [RCX+5*8]
	MOV R14,QWORD [RCX+6*8]
	MOV R15,QWORD [RCX+7*8]
	MOV RDI,QWORD [RCX+8*8]
	MOV RSI,QWORD [RCX+9*8]
	MOVSD XMM6,QWORD [RCX+10*8]
	MOVSD XMM7,QWORD [RCX+11*8]
	MOVSD XMM8,QWORD [RCX+12*8]
	MOVSD XMM9,QWORD [RCX+13*8]
	MOVSD XMM10,QWORD [RCX+14*8]
	MOVSD XMM11,QWORD [RCX+15*8]
	MOVSD XMM12,QWORD [RCX+17*8]
	MOVSD XMM13,QWORD [RCX+18*8]
	MOVSD XMM14,QWORD [RCX+19*8]
	MOVSD XMM15,QWORD [RCX+20*8]
	MOV  RAX,1
	JMP RDX
AIWNIOS_makecontext:
	MOV QWORD [RCX+0*8],RDX
	MOV QWORD [RCX+1*8],R8
	MOV QWORD [RCX+2*8],0
	RET
